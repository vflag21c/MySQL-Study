# 쿼리 작성 및 최적화

### 숫자
숫자 값을 상수로 SQL 에 사용할 때는 다른 DBMS 와 마찬가지로 따옴표 또는 없이 숫자 값을 입력하면 된다.  
비교 대상이 숫자 값이거나 숫자 타입의 컬럼이면 MySQL 서버가 문자열 값을 숫자 값으로 자동 변환한다.
```sql
SELECT * FROM TAB_TEST WHERE number_column='10001'; 
SELECT * FROM TAB_TEST WHERE string_column=10001; --성능 문제 발생
```
> MySQL 은 숫자 타입과 문자열 타입 간의 비교에서 숫자 타입을 우선시하므로 문자열 값을 숫자 값으로 변환 후 비교


### 날짜
다른 DBMS에서 날짜 타입을 비교하거나 INSERT 하려면 문자열을 DATE 타입으로 변환하는 코드가 필요  
MySQL 에서는 서버가 자동으로 DATE나 DATETIME 값으로 변환
```sql
select * from dept_emp where from_date='2011-04-29';
select * from dept_emp where from_date=STR_TO_DATE('2011-04-29', '%Y-%m-%d');
```

### 동등 비교
`<=>`연산자는 NULL 값에 대한 비교까지 수행한다. MySQL 에서는 이 연산자를 `NULL-Safe` 비교 연산자라고 함

### 부정 비교
`<>`, 와 `!=` 어느쪽을 사용하든 특별히 문제가 되지는 않겠지만 통일해서 사용하는 방법을 권장

### REGEXP 연산자
정규표현식을 사용하여 검색하며, 인덱스 레인지 스캔을 사용할 수 없기 때문에 가능하다면 데이터 조회 범위를 줄일 수 있는 조건과 함께 사용하길 권장

### 현재시각 조회 (NOW, SYSDATE)
하나의 SQL 에서 모든 `NOW()` 함수는 같은 값을 가지지만 `SYSDATE()` 함수는 하나의 SQL 내에서도 호출되는 시점에 따라 결괏값이 달라진다.  
`NOW()`의 경우 쿼리가 1시간 동안 실행되더라도 실행되는 위치나 시점에 관계없이 항상 같은 값을 보장 할 수 있다.

 > 꼭 필요한 때가 아니라면 SYSDATE() 함수를 사용하지 않는 편이 좋다.

### JSON_EXTRACT()
MySQL 서버는 다음과 같이 JSON 연산자를 제공한다
```sql
SELECT EMP_NO, DOC->"$.first_name" FROM employee_docs;
```