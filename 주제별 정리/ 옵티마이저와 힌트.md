# 옵티마이저와 힌트

---

### GROUP BY 처리
GROUP BY 작업도 인덱스를 사용하는 경우와 그렇지 못한 경우로 나눠 볼 수 있다. 인덱스를 이용할 때는 인덱스를 차례대로 읽는 인덱스 스캔 방법과 인덱스를 건너뛰면서 읽는 루스 인덱스 스캔이라는 방법으로 나뉜다.  
그리고 인덱스를 사용하지 못하는 쿼리에서 GROUP BY 작업은 `임시테이블`을 사용한다.

> MySQL8.0 에서는 GROUP BY 가 필요한 경우 내부적으로 GROUP BY 절의 컬럼들로 구성된 유니크 인덱스를 가진 임시 테이블을 만들어서 중복 제거와 집합 함수 연산을 수행한다.

### SELECT DISTINCT ...
단순히 SELECT 되는 레코드 중에서 유니크한 레코드만 가져오고자 하면 SELECT DISTINCT 형태의 쿼리 문장을 사용한다.  
이 경우에는 GROUP BY와 동일한 방식으로 처리된다.
```sql
SELECT DISTINCT emp_no FROM salaries;
SELECT emp_no FROM salaries GROUP BY emp_no;
```

### 인덱스 스킵 스캔
인덱스 (`A`, `B`, `C`) 일 경우 WHERE 조건 순서가 `B`, `C` 일 경우 일반적인 경우는 인덱스를 활용할 수 없다.
하지만 인덱스 스킵 스캔의 경우 제한적이긴 하지만 인덱스의 이런 제약 사항을 뛰어넘을 수 있는 최적화 기법.

> `but` 선행 `A` 컬럼이 매우 다양한 값을 가지는 경우에는 인덱스 스킵 스캔 최적화가 `비효율`적 일 수 있다.  
> 그래서 MySQL8.0 옵티마이저는 인덱스의 선행 컬럼이 소수의 유니크한 값을 가질때만 인덱스 스킵 스캔 최적화를 사용한다.

### 쿼리 힌트
MySQL 서버에서 사용 가능한 쿼리 힌트
 - 인덱스 힌트
   - ANSI-SQL 표준 문법을 준수하지 못하게 되는 단점
 - 옵티마이저 힌트


 
 